(this["webpackJsonpmern-app-frontend"]=this["webpackJsonpmern-app-frontend"]||[]).push([[0],{34:function(e,t,a){e.exports=a(64)},41:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);a(35),a(20),a(36);var n=a(0),l=a.n(n),r=a(32),c=a.n(r),o=(a(41),a(3)),s=a(1),m=a(4);function i(){var e=Object(s.f)();return l.a.createElement("form",{className:"form-inline"},l.a.createElement("button",{className:"btn btn-default text-primary text-uppercase",onClick:function(){e.push("/signin")}},"Login"),l.a.createElement("button",{className:"btn btn-default text-primary text-uppercase",onClick:function(){e.push("/signup")}},"Register"))}var u=Object(n.createContext)({});function d(){var e=Object(n.useContext)(u),t=(e.user,e.setUser),a=Object(n.useContext)(u),r=Object(s.f)();return console.log(a.user.user),l.a.createElement("nav",{className:"navbar navbar-dark bg-dark"},l.a.createElement("a",{href:"#",className:"navbar-brand"},l.a.createElement("p",{className:"font-italic font-weight-bold text-primary"},"EVENTS")),l.a.createElement("ul",{className:" nav justify-content-center nav-pills nav-fill pl-4"},null==a.user.token?l.a.createElement(i,null):"admin"==a.user.user.role?l.a.createElement(l.a.Fragment,null,l.a.createElement("li",{key:"1",className:"nav-item flex-sm-fill text-sm-center font-weight-bold text-uppercase"},l.a.createElement(m.b,{to:"/admin/all-events",className:"nav-link"},"Events")),l.a.createElement("li",{key:"2",className:"nav-item flex-sm-fill text-sm-center font-weight-bold text-uppercase"},l.a.createElement(m.b,{to:"/admin/all-users",className:"nav-link"},"Users")),l.a.createElement("button",{className:"btn btn-default text-primary text-uppercase",onClick:function(){localStorage.clear(),t({token:null,user:null}),r.push("/")}},"Logout")):l.a.createElement(l.a.Fragment,null,l.a.createElement("li",{key:"1",className:"nav-item flex-sm-fill text-sm-center font-weight-bold text-uppercase"},l.a.createElement(m.b,{to:"/",className:"nav-link"},"Events")),l.a.createElement("li",{className:"nav-item flex-sm-fill text-sm-center font-weight-bold text-uppercase"},l.a.createElement(m.b,{to:"/new-event",className:"nav-link"},"Add event")),l.a.createElement("li",{className:"nav-item flex-sm-fill text-sm-center font-weight-bold text-uppercase"},l.a.createElement(m.b,{to:"/attending",className:"nav-link"},"Attending")),l.a.createElement("button",{className:"btn btn-default text-primary text-uppercase",onClick:function(){localStorage.clear(),t({token:null,user:null}),r.push("/")}},"Logout")),null!==a.token?l.a.createElement("li",{className:"nav-item flex-sm-fill text-sm-center nav-link"}):l.a.createElement("li",null)))}var p=a(2),E=a.n(p);function h(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useContext)(u),i=c.user;c.setUser,Object(s.f)();Object(n.useEffect)((function(){try{E.a.get("http://localhost:4200/api/event/").then((function(e){e.data.length>0&&r(e.data)}))}catch(e){alert("Errror! could not fetch events")}}),[]);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},a.map((function(e){return l.a.createElement("div",{className:"col-sm-12 col-md-4 col-4",key:e._id},l.a.createElement("div",{className:"card"},l.a.createElement("img",{className:"card-image",src:e.imageUrl,alt:"image"}),l.a.createElement("div",{className:"card_body"},l.a.createElement("h5",{className:"text-uppercase"},e.title),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-12 col-md-6"},l.a.createElement("p",null,"Date: ",e.date))," ",null!==e.organizer?l.a.createElement("div",{className:"col-sm-12 col-md-6"},l.a.createElement("p",{className:"text-capitalize"},"Organized by: ",e.organizer.username)):l.a.createElement("div",null)),l.a.createElement("p",{className:"text-capitalize text-center"},e.description),null==i.user?l.a.createElement(l.a.Fragment,null,l.a.createElement(m.b,{to:"/signin"}," ",l.a.createElement("input",{type:"submit",value:"Sign In To Attend",className:"btn btn-primary"}))):null!==e.organizer?i.user.id===e.organizer._id?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-12 col-md-12"},l.a.createElement("p",{className:"text-capitalize bg-primary"},"You are the organizer ")))):l.a.createElement("div",null):e.attending.includes(i.user.id)?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:"text-capitalize bg-primary"},"you are attending this")):l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"btn btn-primary text-capitalize",onClick:function(){var t=e._id;E.a.put("http://localhost:4200/api/event/book",{eventId:t},{headers:{Authorization:"Bearer "+localStorage.getItem("auth-token")}}).then((function(e){i.user._id,window.location.reload()}),(function(e){console.log(e)}))}},"attend")))))}))))}var g={};function f(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useContext)(u),m=c.user,i=(c.setUser,Object(s.f)());return Object(n.useEffect)((function(){null!=m.user&&"admin"!=m.user.role||i.push("/login"),E.a.get("http://localhost:4200/api/event/my_events",{headers:{Authorization:"Bearer "+localStorage.getItem("auth-token")}}).then((function(e){e.data.length>0&&r(e.data)}))}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},a.length>0?l.a.createElement(l.a.Fragment,null,a.map((function(e){return l.a.createElement("div",{className:"col-sm-12 col-md-4 col-4",key:e._id},l.a.createElement("div",{className:"card"},l.a.createElement("img",{className:"card-image",src:e.imageUrl,alt:"image"}),l.a.createElement("div",{className:"card_body"},l.a.createElement("h5",{className:"text-uppercase"},e.title),l.a.createElement("div",{className:"col-sm-12 col-md-6"},l.a.createElement("p",null,"Date: ",e.date)),l.a.createElement("p",{className:"text-capitalize"},e.description),l.a.createElement("div",{className:"card-action"},l.a.createElement("button",{className:"btn btn-primary text-capitalize",type:"button","data-toggle":"collapse","data-target":"#collapseExample","aria-expanded":"false","aria-controls":"collapseExample"},"see who booked"),l.a.createElement("div",{className:"collapse",id:"collapseExample"},l.a.createElement("table",{className:"table table-bordered"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"User Name"),l.a.createElement("th",null,"User Email"))),l.a.createElement("tbody",null,e.attending.length>0?e.attending.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",{className:"text-capitalize"},e.username),l.a.createElement("td",null,e.email))})):l.a.createElement("tr",null,l.a.createElement("td",null,"no bookings yet"),"t")))),l.a.createElement("button",{className:"btn btn-primary",onClick:function(){g=e,i.push("/edit-event")}},"Edit/Delete Event")))))}))):l.a.createElement("p",{className:"text-center text-capitalize"},"You have not added any events yet")))}var b=a(13),v=a(14),N=a(16),x=a(15),y=function(e){Object(N.a)(a,e);var t=Object(x.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{style:j},l.a.createElement("p",{className:"text-center text-capitalize font-weight-bold text-monospace"},"Error 404! "),l.a.createElement("p",{className:"text-center text-capitalize font-weight-bold text-monospace"}," Page non found"))}}]),a}(n.Component),j={fontSize:"50px"},w=a(10),O=(a(63),function(e){Object(N.a)(a,e);var t=Object(x.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={title:"",imageUrl:"",date:"",description:""},n.handletitle=n.handletitle.bind(Object(w.a)(n)),n.state.handledate=n.handledate.bind(Object(w.a)(n)),n.state.handleimg=n.handleimg.bind(Object(w.a)(n)),n.state.handledescription=n.handledescription.bind(Object(w.a)(n)),n.state.handleSubmit=n.handleSubmit.bind(Object(w.a)(n)),n}return Object(v.a)(a,[{key:"handletitle",value:function(e){var t=this.state.title;t=e.target.value,this.setState({title:t})}},{key:"handledate",value:function(e){var t=this.state.date;t=e.target.value,this.setState({date:t})}},{key:"handleimg",value:function(e){var t=this.state.imageUrl;t=e.target.value,this.setState({imageUrl:t})}},{key:"handledescription",value:function(e){var t=this.state.description;t=e.target.value,this.setState({description:t})}},{key:"handleSubmit",value:function(){var e=this.state,t=e.title,a=e.imageUrl,n=e.description,l=e.date;E.a.post("http://localhost:4200/api/event/new",{title:t,date:l,imageUrl:a,description:n},{headers:{Authorization:"Bearer "+localStorage.getItem("auth-token")}}).then((function(e){console.log(e.data),window.location.reload(!0)}),(function(e){alert("an error occured try refreshing the page and try again")}))}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("section",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h2",{className:"font-weight-bold text-uppercase text-center "},"new event"))),l.a.createElement("section",{className:"row justify-content-center"},l.a.createElement("section",{className:"col-12 col-md-8 col-sm-6"},l.a.createElement("div",{className:"s-form-container"},l.a.createElement("div",{className:"form-row form-group"},l.a.createElement("div",{className:"col"},l.a.createElement("label",null,"Event Title"),l.a.createElement("input",{type:"text",className:"form-control",placeholder:"Event Title",onChange:this.handletitle,required:!0}))),l.a.createElement("div",{className:"form-row form-group"},l.a.createElement("div",{className:"col"},l.a.createElement("label",null,"Date"),l.a.createElement("input",{type:"date",className:"form-control",placeholder:"date",required:!0,onChange:this.state.handledate})),l.a.createElement("div",{className:"col"},l.a.createElement("label",null," Event Image"),l.a.createElement("input",{type:"text",className:"form-control",placeholder:" Image url",required:!0,onChange:this.state.handleimg}))),l.a.createElement("div",{className:"form-row form-group"},l.a.createElement("div",{className:"col"},l.a.createElement("label",null,"Description"),l.a.createElement("textarea",{type:"text",className:"form-control",rows:5,placeholder:"Description",required:!0,onChange:this.state.handledescription}))),l.a.createElement("button",{className:"btn btn-primary text-uppercase",onClick:this.state.handleSubmit},"Add event")))))}}]),a}(l.a.Component));function k(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),s=Object(o.a)(c,2),i=s[0],d=s[1],p=Object(n.useContext)(u),h=p.user,g=p.setUser;return l.a.createElement("div",{className:""},l.a.createElement("h2",{className:"font-weight-bold text-uppercase text-center"},"log in"),l.a.createElement("section",{className:"row justify-content-center"},l.a.createElement("section",{className:"col-12 col-md-3 col-sm-6"},l.a.createElement("div",{className:"form-container"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htlmfor:"inputEmail"},"Email address"),l.a.createElement("input",{type:"email",className:"form-control",id:"inputEmail",placeholder:"Enter email",onChange:function(e){return r(e.target.value)}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htlmfor:"inputPassword"},"Password"),l.a.createElement("input",{type:"password",className:"form-control",id:"inputPassword",placeholder:"Password",onChange:function(e){return d(e.target.value)}})),l.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(){return function(){try{E.a.post("http://localhost:4200/api/user/login",{email:a,password:i}).then((function(e){localStorage.setItem("auth-token",e.data.token),localStorage.setItem("user",JSON.stringify(e.data.user)),g({token:localStorage.getItem("auth-token"),user:localStorage.getItem("user")}),console.log(h),window.location.reload(!0)}),(function(e){alert("invalid username or password")}))}catch(e){alert("wrong username or password!")}}()}},"Login")),l.a.createElement("p",null,"Don't have an account? ",l.a.createElement(m.b,{to:"signup"},"Sign up")))))}function S(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),m=Object(o.a)(c,2),i=m[0],d=m[1],p=Object(n.useState)(""),h=Object(o.a)(p,2),g=h[0],f=h[1],b=Object(n.useState)(""),v=Object(o.a)(b,2),N=v[0],x=(v[1],Object(n.useContext)(u).setUserData,Object(s.f)());return l.a.createElement(l.a.Fragment,null,l.a.createElement("section",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h2",{className:"font-weight-bold text-uppercase text-center "},"sign up")),l.a.createElement("p",{style:{color:"red"},className:"text-center text-capitalize"},N," ")),l.a.createElement("section",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-12 col-md-8 col-sm-7"},l.a.createElement("div",{className:"s-form-container"},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htlmfor:"inputEmail"},"Email address"),l.a.createElement("input",{type:"email",value:a,className:"form-control",id:"inputEmail",placeholder:"Enter email",onChange:function(e){return r(e.target.value)}})),l.a.createElement("div",{className:"form-group "},l.a.createElement("label",{htlmfor:"username"},"User Name"),l.a.createElement("input",{type:"text",value:g,className:"form-control",id:"username",onChange:function(e){return f(e.target.value)}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htlmfor:"inputPassword"},"Password"),l.a.createElement("input",{type:"password",value:i,className:"form-control",id:"inputPassword",placeholder:"Password",onChange:function(e){return d(e.target.value)}})),l.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(){return function(){try{E.a.post("http://localhost:4200/api/user/signup",{username:g,password:i,email:a,role:"user"}).then((function(e){console.log(e),x.push("/signin")}),(function(e){alert("unable to create account. please try again with valid credentials")}))}catch(e){console.log(e)}}()}},"Sign up")))))}function C(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useContext)(u),m=c.user,i=(c.setUser,Object(s.f)());return Object(n.useEffect)((function(){null!=m.user&&"user"!=m.user.role||i.push("/"),E.a.get("http://localhost:4200/api/event/").then((function(e){r(e.data)}),(function(e){console.log(e)})).catch((function(e){console.log(e)}))})),l.a.createElement(l.a.Fragment,null,a.length>0?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row"},a.map((function(e){return l.a.createElement("div",{className:"col-sm-12 col-md-4 col-4",key:e._id},l.a.createElement("div",{className:"card"},l.a.createElement("img",{src:e.imageUrl,alt:"image"}),l.a.createElement("div",{className:"card_body"},l.a.createElement("h5",{className:"text-uppercase text-center"},e.title),l.a.createElement("p",{className:"text-capitalize text-center"},e.date),l.a.createElement("p",{className:"text-capitalize text-center"},e.description),l.a.createElement("button",{className:"btn btn-primary",onClick:function(){E.a.delete("http://localhost:4200/api/event/".concat(e._id),{headers:{Authorization:"Bearer "+localStorage.getItem("auth-token")}}).then((function(e){window.location.reload()})).catch((function(e){alert("something went wrong. please reloading and try again")}))}},"Delete"))))})))):l.a.createElement("h3",{className:"text-center text-uppercase "},"there are currently no events "))}function z(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useContext)(u),m=(c.user,c.setUser,Object(s.f)());return Object(n.useEffect)((function(){0!=localStorage.getItem("user")&&"user"!=localStorage.getItem("user").role||m.push("/"),E.a.get("http://localhost:4200/api/user/").then((function(e){r(e.data.users)}),(function(e){alert("an error occured. please refresh the page and try again")})).catch((function(e){console.log(e)}))})),l.a.createElement(l.a.Fragment,null,l.a.createElement("table",{className:"table table-"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"User Name"),l.a.createElement("th",{scope:"col"},"Email"),l.a.createElement("th",{scope:"col"}))),l.a.createElement("tbody",null,a.length>0?a.map((function(e){return l.a.createElement(l.a.Fragment,{key:e._id},l.a.createElement("tr",null,l.a.createElement("td",null,e.username),l.a.createElement("td",null,e.email),l.a.createElement("td",null,l.a.createElement("button",{onClick:function(){E.a.delete("http://localhost:4200/api/user/".concat(e._id)).then((function(e){console.log(e)}),(function(e){alert("".concat(e))}))}},"Delete"))))})):l.a.createElement("tr",{colSpan:3},l.a.createElement("td",{className:"text-center text-uppercase"},"there are currently no users")))))}function U(){var e=Object(s.f)(),t=Object(n.useState)({}),a=Object(o.a)(t,2),r=a[0],c=a[1],m=Object(n.useContext)(u),i=m.user;m.setUser;Object(n.useEffect)((function(){null!=i.user&&"admin"!=i.user.role||e.push("/login")}),[]);var d=g.title,p=g.imageUrl,h=g.description,f=g.date;return l.a.createElement(l.a.Fragment,null,l.a.createElement("section",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-12"},l.a.createElement("h2",{className:"font-weight-bold text-uppercase text-center "},"Edit event"))),l.a.createElement("section",{className:"row justify-content-center"},l.a.createElement("section",{className:"col-12 col-md-8 col-sm-6"},l.a.createElement("div",{className:"s-form-container"},l.a.createElement("div",{className:"form-row form-group"},l.a.createElement("div",{className:"col"},l.a.createElement("label",null,"Event Title"),l.a.createElement("input",{type:"text",className:"form-control",placeholder:d,onChange:function(e){c({title:e.target.value})},required:!0}))),l.a.createElement("div",{className:"form-row form-group"},l.a.createElement("div",{className:"col"},l.a.createElement("label",null,"Date"),l.a.createElement("input",{type:"date",className:"form-control",placeholder:f,onChange:function(e){return c({date:e.target.value})},required:!0})),l.a.createElement("div",{className:"col"},l.a.createElement("label",null," Event Image"),l.a.createElement("input",{type:"text",className:"form-control",placeholder:p,onChange:function(e){return c({imageUrl:e.target.value})},required:!0}))),l.a.createElement("div",{className:"form-row form-group"},l.a.createElement("div",{className:"col"},l.a.createElement("label",null,"Description"),l.a.createElement("textarea",{type:"text",className:"form-control",rows:5,placeholder:h,onChange:function(e){return c({description:e.target.value})},required:!0}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-3 col-3"},l.a.createElement("button",{className:"btn btn-primary text-uppercase",onClick:function(){return function(){var t=r.title,a=r.imageUrl,n=r.description,l=r.date,c=g._id;E.a.put("http://localhost:4200/api/event/update",{title:t,imageUrl:a,description:n,date:l,_id:c},{headers:{Authorization:"Bearer "+localStorage.getItem("auth-token")}}).then((function(t){console.log(t.data),e.push("/")}),(function(e){console.log(e)}))}()}},"Save update")),l.a.createElement("div",{className:"col-md-3 col-3"},l.a.createElement("button",{className:"btn btn-primary text-uppercase",onClick:function(){return function(){var t=g._id;E.a.delete("http://localhost:4200/api/event/".concat(t),{headers:{Authorization:"Bearer "+localStorage.getItem("auth-token")}}).then((function(t){console.log(t.data),e.push("/")}),(function(e){return console.log(e)}))}()}},"delete event")))))))}var I=function(){var e=Object(s.f)(),t=Object(n.useContext)(u),a=(t.user,t.setUser);return Object(n.useEffect)((function(){var t=JSON.parse(localStorage.getItem("user")),n=localStorage.getItem("auth-token");t&&n&&(a({token:n,user:t}),"user"==t.role?e.push("/"):"admin"==t.role&&e.push("/admin/all-events"))}),[]),l.a.createElement(s.c,null,l.a.createElement(s.a,{exact:!0,path:"/",component:h}),l.a.createElement(s.a,{path:"/my_events",component:f}),l.a.createElement(s.a,{path:"/signin",component:k}),l.a.createElement(s.a,{path:"/signup",component:S}),l.a.createElement(s.a,{path:"/new-event",component:O}),l.a.createElement(s.a,{path:"/admin/all-events",component:C}),l.a.createElement(s.a,{path:"/admin/all-users",component:z}),l.a.createElement(s.a,{path:"/edit-event",component:U}),l.a.createElement(s.a,{component:y}))};var _=function(){var e=Object(n.useState)({token:null,user:null}),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useMemo)((function(){return{user:a,setUser:r}}),[a,r]);return l.a.createElement("div",{className:"container"},l.a.createElement(u.Provider,{value:c},l.a.createElement(d,null),l.a.createElement(I,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(m.a,null,l.a.createElement(_,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.941e0b8a.chunk.js.map